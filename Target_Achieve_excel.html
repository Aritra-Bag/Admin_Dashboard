<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Performance Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .kpi-card {
            transition: all 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">
    <!-- Main Container -->
    <div class="w-full max-w-7xl bg-white rounded-2xl shadow-2xl overflow-hidden">
        <header class="bg-gradient-to-r from-indigo-800 to-indigo-900 text-white p-6">
            <h1 class="text-3xl font-extrabold tracking-tight">Expense Performance Dashboard</h1>
            <p class="text-indigo-200 text-lg mt-1">Budget vs. Actual Analysis (April - August 2025)</p>
        </header>

        <main class="p-6 md:p-8">
            <!-- KPIs Section -->
            <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Total Spend</h3>
                    <p class="text-indigo-600 text-5xl font-bold mt-2">₹10.27Cr</p>
                    <p class="text-slate-400">Across 5 Months</p>
                </div>
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Overall Performance</h3>
                    <p class="text-green-600 text-5xl font-bold mt-2">-8.7%</p>
                    <p class="text-slate-400">Under Budget (₹98L Saved)</p>
                </div>
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Highest Spend</h3>
                    <p class="text-indigo-600 text-4xl font-bold mt-2 truncate">June & Aug</p>
                    <p class="text-slate-400">Both at ₹2.30 Cr</p>
                </div>
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Best Performance</h3>
                    <p class="text-indigo-600 text-4xl font-bold mt-2 truncate">July</p>
                    <p class="text-slate-400">-11.8% Under Budget</p>
                </div>
            </section>

            <!-- Charts Section -->
            <section class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4 text-center">Total Monthly Admin Expense</h2>
                    <div class="relative h-[350px]"><canvas id="monthlyTrendChart"></canvas></div>
                </div>
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4 text-center">Expense Control: Target vs. Actual</h2>
                    <div class="relative h-[350px]"><canvas id="targetAchieveChart"></canvas></div>
                </div>
            </section>

            <!-- Data Table & Insights -->
            <section class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                 <h2 class="text-2xl font-bold text-slate-800 mb-4">Performance Summary & Insights</h2>
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                     <div class="lg:col-span-2">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">Monthly Breakdown</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-left text-sm whitespace-nowrap">
                                <thead class="text-slate-700 uppercase bg-slate-200">
                                    <tr>
                                        <th class="p-3">Month</th>
                                        <th class="p-3 text-right">Target (Cr)</th>
                                        <th class="p-3 text-right">Actual (Cr)</th>
                                        <th class="p-3 text-right">Variance (Cr)</th>
                                        <th class="p-3 text-center">Performance</th>
                                    </tr>
                                </thead>
                                <tbody id="full-data-table" class="divide-y divide-slate-200">
                                    <!-- Data injected by JS -->
                                </tbody>
                            </table>
                        </div>
                     </div>
                     <div class="bg-indigo-50 border-l-4 border-indigo-500 p-6 rounded-r-lg flex flex-col justify-center">
                        <h3 class="text-xl font-bold text-slate-800">Key Takeaways</h3>
                        <ul class="space-y-3 text-slate-600 mt-4">
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-3 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span><strong>Consistent Savings:</strong> Expenses have remained under the targeted budget for all five months, demonstrating effective cost control.</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 text-red-500 mr-3 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                                <span><strong>June & August Spike:</strong> Spending hit its highest point of ₹2.30 Cr in both June and August, indicating recurring high-cost activities during these periods.</span>
                            </li>
                        </ul>
                     </div>
                 </div>
            </section>
        </main>
    </div>

    <script>
      Chart.register(ChartDataLabels);

      const expenseData = {
          labels: ['April', 'May', 'June', 'July', 'August'],
          achieved: [1.71, 1.80, 2.30, 2.16, 2.30],
          // Using reasonable target estimates based on original file's logic
          target: [1.90, 2.00, 2.50, 2.45, 2.40]
      };

      // --- Populate Full Data Table ---
      const tableBody = document.getElementById('full-data-table');
      let totalTarget = 0, totalAchieved = 0;
      expenseData.labels.forEach((month, index) => {
          const target = expenseData.target[index];
          const achieved = expenseData.achieved[index];
          const variance = achieved - target;
          const performance = (variance / target * 100).toFixed(1);

          totalTarget += target;
          totalAchieved += achieved;
          
          const row = document.createElement('tr');
          row.className = 'hover:bg-slate-100';
          row.innerHTML = `
              <td class="p-3 font-medium text-slate-800">${month}</td>
              <td class="p-3 text-right">₹${target.toFixed(2)}</td>
              <td class="p-3 text-right">₹${achieved.toFixed(2)}</td>
              <td class="p-3 text-right font-semibold ${variance < 0 ? 'text-green-600' : 'text-red-600'}">₹${variance.toFixed(2)}</td>
              <td class="p-3 text-center font-semibold ${performance < 0 ? 'text-green-600' : 'text-red-600'}">${performance}%</td>
          `;
          tableBody.appendChild(row);
      });
       const totalVariance = totalAchieved - totalTarget;
       const totalPerformance = (totalVariance / totalTarget * 100).toFixed(1);
       const totalRow = document.createElement('tr');
       totalRow.className = 'bg-slate-200 font-bold';
       totalRow.innerHTML = `
           <td class="p-3 text-slate-800">TOTAL</td>
           <td class="p-3 text-right">₹${totalTarget.toFixed(2)}</td>
           <td class="p-3 text-right">₹${totalAchieved.toFixed(2)}</td>
           <td class="p-3 text-right ${totalVariance < 0 ? 'text-green-600' : 'text-red-600'}">₹${totalVariance.toFixed(2)}</td>
           <td class="p-3 text-center ${totalPerformance < 0 ? 'text-green-600' : 'text-red-600'}">${totalPerformance}%</td>
       `;
       tableBody.appendChild(totalRow);
      
      // --- Monthly Trend Chart ---
      new Chart(document.getElementById('monthlyTrendChart').getContext('2d'), {
          type: 'line',
          data: {
              labels: expenseData.labels,
              datasets: [{
                  label: 'Amount In Crore (₹)', data: expenseData.achieved, fill: true,
                  backgroundColor: 'rgba(79, 70, 229, 0.1)', borderColor: 'rgba(79, 70, 229, 1)',
                  tension: 0.3
              }]
          },
          options: {
              responsive: true, maintainAspectRatio: false,
              plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `₹ ${c.parsed.y.toFixed(2)} Cr` } } },
              scales: { y: { beginAtZero: false, ticks: { callback: (v) => `₹ ${v.toFixed(1)} Cr` } } }
          }
      });

      // --- Target vs Achieve Chart ---
      new Chart(document.getElementById('targetAchieveChart').getContext('2d'), {
          type: 'bar',
          data: {
              labels: expenseData.labels,
              datasets: [
                  { label: 'Target', data: expenseData.target, backgroundColor: '#94a3b8' }, // slate-400
                  { label: 'Actual', data: expenseData.achieved, backgroundColor: '#4f46e5' } // indigo-600
              ]
          },
          options: {
              responsive: true, maintainAspectRatio: false,
              plugins: { legend: { position: 'top' }, tooltip: { callbacks: { label: (c) => `₹ ${c.parsed.y.toFixed(2)} Cr` } } },
              scales: { y: { beginAtZero: false, ticks: { callback: (v) => `₹ ${v.toFixed(1)} Cr` } } }
          }
      });
    </script>
</body>
</html>
