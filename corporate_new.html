<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Corporate Office Occupancy Analysis</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
      }
    </style>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">
    <!-- Slide Container -->
    <div class="w-full max-w-6xl bg-white rounded-xl shadow-lg overflow-hidden">
      <header class="bg-gray-800 text-white p-6">
        <h1 class="text-3xl font-bold">Corporate Office Occupancy Analysis</h1>
        <p class="text-gray-300 text-lg">Current Space Utilization Overview</p>
      </header>

      <main class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Left Column: Inventory & Common Areas -->
        <div class="bg-slate-50 p-6 rounded-lg flex flex-col">
          <h2 class="text-2xl font-semibold text-slate-700 mb-4 text-center">
            Space Inventory & Occupancy
          </h2>
          <!-- Assignable Spaces -->
          <div>
            <h3 class="text-xl font-semibold text-slate-600 mb-4 border-b pb-2">
              Assignable Spaces
            </h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6 items-center">
              <div class="text-center">
                <h4 class="text-lg font-semibold text-slate-600 mb-2">
                  Workstations
                </h4>
                <div class="relative w-40 h-40 md:w-48 md:h-48 mx-auto">
                  <canvas id="workstationChart"></canvas>
                </div>
                <p class="mt-3 text-slate-500">
                  <strong class="text-slate-700">454</strong> Available of
                  <strong>798</strong> Total
                </p>
              </div>
              <div class="text-center">
                <h4 class="text-lg font-semibold text-slate-600 mb-2">
                  Cabins
                </h4>
                <div class="relative w-40 h-40 md:w-48 md:h-48 mx-auto">
                  <canvas id="cabinChart"></canvas>
                </div>
                <p class="mt-3 text-slate-500">
                  <strong class="text-slate-700">28</strong> Available of
                  <strong>74</strong> Total
                </p>
              </div>
            </div>
          </div>

          <!-- Common Areas -->
          <div class="mt-8">
            <h3 class="text-xl font-semibold text-slate-600 mb-4 border-b pb-2">
              Common & Support Areas
            </h3>
            <div class="space-y-4">
              <div
                class="flex items-center justify-between bg-white p-3 rounded-lg shadow-sm"
              >
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-indigo-500 mr-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.653-.28-1.25-1.44-1.654M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.653.28-1.25 1.44-1.654M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 0c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"
                    ></path>
                  </svg>
                  <span class="text-slate-700">Conference Rooms</span>
                </div>
                <span class="font-bold text-slate-800"
                  >11 Rooms
                  <span class="text-slate-500 font-medium"
                    >(166 Seats)</span
                  ></span
                >
              </div>
              <div
                class="flex items-center justify-between bg-white p-3 rounded-lg shadow-sm"
              >
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-amber-500 mr-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M21 3v2c0 1.105-.895 2-2 2H5c-1.105 0-2-.895-2-2V3m18 0H3m18 0h-2m-2 0h-2m-2 0h-2m-2 0h-2m-2 0H5m14 0v2c0 .552-.448 1-1 1h-1c-.552 0-1-.448-1-1V3m-4 0v2c0 .552-.448 1-1 1h-1c-.552 0-1-.448-1-1V3m-4 0v2c0 .552-.448 1-1 1H6c-.552 0-1-.448-1-1V3"
                    ></path>
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M18 9v12H6V9h12zM9 12h6m-6 3h6"
                    ></path>
                  </svg>
                  <span class="text-slate-700">Pantries</span>
                </div>
                <span class="font-bold text-slate-800"
                  >7 Rooms
                  <span class="text-slate-500 font-medium"
                    >(97 Seats)</span
                  ></span
                >
              </div>
              <div
                class="flex items-center justify-between bg-white p-3 rounded-lg shadow-sm"
              >
                <div class="flex items-center">
                  <svg
                    class="w-6 h-6 text-teal-500 mr-4"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"
                    ></path>
                  </svg>
                  <span class="text-slate-700">Training Rooms</span>
                </div>
                <span class="font-bold text-slate-800"
                  >2 Rooms
                  <span class="text-slate-500 font-medium"
                    >(86 Seats)</span
                  ></span
                >
              </div>
            </div>
          </div>
        </div>

        <!-- Right Column: Floor-wise Breakdown Charts -->
        <div class="space-y-8">
          <!-- Graph 1: Floor-wise Breakdown by Count -->
          <div class="bg-slate-50 p-6 rounded-lg">
            <h2 class="text-2xl font-semibold text-slate-700 mb-4 text-center">
              Workstation Count by Floor
            </h2>
            <canvas id="floorChart"></canvas>
          </div>
          <!-- Graph 2: Floor-wise Breakdown by Percentage -->
          <div class="bg-slate-50 p-6 rounded-lg">
            <h2 class="text-2xl font-semibold text-slate-700 mb-4 text-center">
              Occupancy by Floor (%)
            </h2>
            <canvas id="floorPercentageChart"></canvas>
          </div>
        </div>
      </main>

      <footer class="px-6 md:px-8 pb-6">
        <div class="bg-slate-100 p-6 rounded-lg">
          <h3 class="text-xl font-semibold text-slate-700 mb-2">
            Strategic Discussion Point
          </h3>
          <p class="text-slate-600">
            With a significant overall workstation availability of 57%, there is
            a substantial opportunity to optimize our real estate footprint.
            We can consider consolidating teams to free up entire floors and reserve this space for projected future growth.
          </p>
        </div>
      </footer>
    </div>

    <script>
      Chart.register(ChartDataLabels);

      // --- MODIFIED: Common Doughnut Chart Options ---
      // Shows percentage on each segment
      const doughnutOptions = (percentages) => ({
        responsive: true,
        maintainAspectRatio: false,
        cutout: "70%",
        plugins: {
          legend: { display: false },
          tooltip: {
            enabled: true,
            callbacks: {
              label: function (context) {
                let label = context.label || "";
                if (label) {
                  label += ": ";
                }
                if (context.parsed !== null) {
                  label += context.raw;
                }
                return label;
              },
            },
          },
          datalabels: {
            formatter: (value, context) => {
              // Display the percentage for the current segment
              return `${percentages[context.dataIndex]}%`;
            },
            color: (context) => {
              // White text for the colored (occupied) segment, dark gray for the grey (available) one
              return context.dataIndex === 0 ? "#000000" : "#374151";
            },
            font: {
              size: 15,
              weight: "bold",
            },
            // Add padding to prevent labels from touching the edge
            padding: 6,
          },
        },
      });

      // --- MODIFIED: Workstation Chart ---
      const workstationCtx = document
        .getElementById("workstationChart")
        .getContext("2d");
      const workstationData = [344, 454];
      const workstationTotal = workstationData.reduce((a, b) => a + b, 0);
      const workstationOccupiedPercentage = Math.round(
        (workstationData[0] / workstationTotal) * 100
      );
      // Calculate available percentage based on occupied, ensuring it totals 100
      const workstationAvailablePercentage =
        100 - workstationOccupiedPercentage;

      new Chart(workstationCtx, {
        type: "doughnut",
        data: {
          labels: ["Occupied", "Available"],
          datasets: [
            {
              data: workstationData,
              backgroundColor: ["#3b82f6", "#e5e7eb"], // Blue for occupied, Grey for available
              borderColor: "#ffffff",
              borderWidth: 4,
              hoverOffset: 8,
            },
          ],
        },
        options: doughnutOptions([
          workstationOccupiedPercentage,
          workstationAvailablePercentage,
        ]),
      });

      // --- MODIFIED: Cabin Chart ---
      const cabinCtx = document.getElementById("cabinChart").getContext("2d");
      const cabinData = [46, 28];
      const cabinTotal = cabinData.reduce((a, b) => a + b, 0);
      const cabinOccupiedPercentage = Math.round(
        (cabinData[0] / cabinTotal) * 100
      );
      // Calculate available percentage based on occupied, ensuring it totals 100
      const cabinAvailablePercentage = 100 - cabinOccupiedPercentage;

      new Chart(cabinCtx, {
        type: "doughnut",
        data: {
          labels: ["Occupied", "Available"],
          datasets: [
            {
              data: cabinData,
              backgroundColor: ["#10b981", "#e5e7eb"], // Green for occupied, Grey for available
              borderColor: "#ffffff",
              borderWidth: 4,
              hoverOffset: 8,
            },
          ],
        },
        options: doughnutOptions([
          cabinOccupiedPercentage,
          cabinAvailablePercentage,
        ]),
      });

      // --- Data for Floor Charts ---
      const floorLabels = [
        "Ground",
        "First",
        "Second",
        "Third",
        "Fourth",
        "Fifth",
        "Sixth",
        "Seventh",
      ];
      const occupiedData = [4, 4, 106, 43, 59, 68, 44, 16];
      const availableData = [2, 80, 62, 117, 97, 52, 28, 16];

      // --- Floor-wise Bar Chart (by Count) ---
      const floorCtx = document.getElementById("floorChart").getContext("2d");
      new Chart(floorCtx, {
        type: "bar",
        data: {
          labels: floorLabels,
          datasets: [
            {
              label: "Occupied",
              data: occupiedData,
              backgroundColor: "#6366f1",
            },
            {
              label: "Available",
              data: availableData,
              backgroundColor: "#d1d5db",
            },
          ],
        },
        options: {
          indexAxis: "y",
          responsive: true,
          plugins: {
            legend: { position: "bottom" },
            datalabels: { display: false },
          },
          scales: {
            x: { stacked: true, grid: { display: false } },
            y: { stacked: true, grid: { display: false } },
          },
        },
      });

      // --- Floor-wise Bar Chart (by Percentage) ---
      const floorPercentageCtx = document
        .getElementById("floorPercentageChart")
        .getContext("2d");
      const occupancyPercentageData = occupiedData.map((occupied, index) => {
        const total = occupied + availableData[index];
        return total === 0 ? 0 : (occupied / total) * 100;
      });

      new Chart(floorPercentageCtx, {
        type: "bar",
        data: {
          labels: floorLabels,
          datasets: [
            {
              label: "Occupancy %",
              data: occupancyPercentageData,
              backgroundColor: "#6366f1",
            },
          ],
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: {
              callbacks: {
                label: function (context) {
                  return `Occupancy: ${context.parsed.y.toFixed(1)}%`;
                },
              },
            },
            datalabels: { display: false },
          },
          scales: {
            y: {
              beginAtZero: true,
              max: 100,
              grid: {
                display: true,
              },
              ticks: {
                callback: function (value) {
                  return value + "%";
                },
              },
            },
            x: {
              grid: {
                display: false,
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
