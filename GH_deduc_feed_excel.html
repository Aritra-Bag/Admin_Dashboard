<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guest House Performance Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .kpi-card {
            transition: all 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">
    <!-- Main Container -->
    <div class="w-full max-w-7xl bg-white rounded-2xl shadow-2xl overflow-hidden">
        <header class="bg-gradient-to-r from-purple-800 to-purple-900 text-white p-6">
            <h1 class="text-3xl font-extrabold tracking-tight">Guest House Performance Dashboard</h1>
            <p class="text-purple-200 text-lg mt-1">Recovery & Guest Satisfaction Analysis (Apr - Sep 2025)</p>
        </header>

        <main class="p-6 md:p-8">
            <!-- KPIs Section -->
            <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Total Recovery (YTD)</h3>
                    <p class="text-purple-600 text-5xl font-bold mt-2">₹6.1L</p>
                    <p class="text-slate-400">From Guest Deductions</p>
                </div>
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Peak Recovery Month</h3>
                    <p class="text-purple-600 text-5xl font-bold mt-2">April</p>
                    <p class="text-slate-400">₹140,000 Recovered</p>
                </div>
                <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Avg. Satisfaction</h3>
                    <p class="text-green-600 text-5xl font-bold mt-2">99%</p>
                    <p class="text-slate-400">Consistently Excellent</p>
                </div>
                 <div class="kpi-card bg-slate-50 p-6 rounded-xl border border-slate-200 text-center">
                    <h3 class="text-slate-500 font-semibold text-lg">Negative Feedback</h3>
                    <p class="text-red-500 text-5xl font-bold mt-2">1%</p>
                    <p class="text-slate-400">Due to AC Issue in Sep</p>
                </div>
            </section>

            <!-- Main Dashboard Area -->
            <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Recovery Analysis -->
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Monthly Recovery from Deductions</h2>
                    <div class="relative h-[300px]"><canvas id="recoveryChart"></canvas></div>
                </div>
                <!-- Feedback Analysis -->
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Guest Satisfaction Trend</h2>
                    <div class="relative h-[300px]"><canvas id="feedbackChart"></canvas></div>
                </div>
            </section>

             <!-- Full Data Table & Insights Section -->
            <section class="mt-8 bg-slate-50 p-6 rounded-xl border border-slate-200">
                 <h2 class="text-2xl font-bold text-slate-800 mb-4">Performance Summary & Action Plan</h2>
                 <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                     <div class="lg:col-span-2">
                        <h3 class="text-lg font-semibold text-slate-700 mb-2">Monthly Breakdown</h3>
                        <div><!--  class="max-h-80 overflow-y-auto" -->
                            <table class="w-full text-left text-sm">
                                <thead class="text-slate-700 uppercase bg-slate-200 sticky top-0">
                                    <tr>
                                        <th class="p-3">Month</th>
                                        <th class="p-3 text-right">Amount Recovered (₹)</th>
                                        <th class="p-3 text-center">Good Feedback (%)</th>
                                    </tr>
                                </thead>
                                <tbody id="full-data-table" class="divide-y divide-slate-200">
                                    <!-- Data injected by JS -->
                                </tbody>
                            </table>
                        </div>
                     </div>
                     <div class="bg-purple-50 border-l-4 border-purple-500 p-6 rounded-r-lg flex flex-col justify-center">
                        <h3 class="text-xl font-bold text-slate-800">Key Insights & Recommendation</h3>
                        <ul class="space-y-3 text-slate-600 mt-4">
                             <li class="flex items-start">
                                <svg class="w-5 h-5 text-green-500 mr-3 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.364 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.538-1.118l1.518-4.674a1 1 0 00-.364-1.118L2.98 9.11c-.783-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"></path></svg>
                                <span><strong>Stellar Service:</strong> Guest satisfaction is exceptionally high, proving service quality is a core strength.</span>
                            </li>
                             <li class="flex items-start">
                                 <svg class="w-5 h-5 text-red-500 mr-3 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                                 <span><strong>Action Item:</strong> The single negative feedback point is due to AC failure. Proactively servicing or upgrading all AC units will protect our 99% satisfaction rate.</span>
                             </li>
                        </ul>
                     </div>
                 </div>
            </section>
        </main>
    </div>

    <script>
      Chart.register(ChartDataLabels);

      const performanceData = [
        //   { month: 'Jan', recovery: 35000, feedback: 95 },
        //   { month: 'Feb', recovery: 74000, feedback: 96 },
        //   { month: 'Mar', recovery: 67000, feedback: 99 },
          { month: 'Apr', recovery: 140000, feedback: 99 },
          { month: 'May', recovery: 120000, feedback: 99 },
          { month: 'Jun', recovery: 120000, feedback: 98 },
          { month: 'Jul', recovery: 97000, feedback: 99 },
          { month: 'Aug', recovery: 73000, feedback: 99 },
          { month: 'Sep', recovery: 60000, feedback: 99 }
      ];

      const labels = performanceData.map(d => d.month);
      const recoveryValues = performanceData.map(d => d.recovery);
      const feedbackValues = performanceData.map(d => d.feedback);
      
      // --- Populate Full Data Table ---
      const tableBody = document.getElementById('full-data-table');
      let totalRecovery = 0;
      performanceData.forEach(d => {
          totalRecovery += d.recovery;
          const row = document.createElement('tr');
          row.className = 'hover:bg-slate-100';
          row.innerHTML = `
              <td class="p-3 font-medium text-slate-800">${d.month}</td>
              <td class="p-3 text-right">₹${d.recovery.toLocaleString('en-IN')}</td>
              <td class="p-3 text-center font-semibold ${d.feedback < 98 ? 'text-yellow-600' : 'text-green-600'}">${d.feedback}%</td>
          `;
          tableBody.appendChild(row);
      });
      // Add Total Row
      const totalRow = document.createElement('tr');
      totalRow.className = 'bg-slate-200 font-bold';
      totalRow.innerHTML = `
          <td class="p-3 text-slate-800">TOTAL</td>
          <td class="p-3 text-right">₹${totalRecovery.toLocaleString('en-IN')}</td>
          <td class="p-3 text-center">-</td>
      `;
      tableBody.appendChild(totalRow);

      // --- Monthly Recovery Chart ---
      new Chart(document.getElementById('recoveryChart').getContext('2d'), {
          type: 'bar',
          data: { labels, datasets: [{ label: 'Amount Recovered (₹)', data: recoveryValues, backgroundColor: '#8b5cf6' }] },
          options: {
              responsive: true, maintainAspectRatio: false,
              plugins: { legend: { display: false }, datalabels: { display: false } },
              scales: { y: { beginAtZero: true, ticks: { callback: (v) => `₹${v/1000}K` } } }
          }
      });

      // --- Guest Feedback Chart ---
      new Chart(document.getElementById('feedbackChart').getContext('2d'), {
          type: 'line',
          data: { labels, datasets: [{ label: 'Good Feedback %', data: feedbackValues, fill: true, backgroundColor: 'rgba(16, 185, 129, 0.1)', borderColor: '#10b981', tension: 0.3 }] },
          options: {
              responsive: true, maintainAspectRatio: false,
              plugins: { legend: { display: false }, datalabels: { display: false } },
              scales: { y: { min: 90, max: 100, ticks: { callback: (v) => `${v}%` } } }
          }
      });
    </script>
</body>
</html>
